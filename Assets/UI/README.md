# UI Toolkit with Rosalina Code Generation

This project uses Rosalina for UI Toolkit code generation to improve workflow and reduce boilerplate code.

## What is Rosalina?

Rosalina is a code generation tool for Unity's UI Toolkit that automatically generates C# binding scripts based on UXML documents. It watches changes to UXML files, parses their content, and generates the corresponding C# code-behind scripts with UI element properties.

## Project Structure

- `Assets/UI/Components/`: Contains UI components (UXML, USS, and C# scripts)
- `Assets/UI/RosalinaBridge.cs`: Utility methods for working with Rosalina
- `Assets/UI/UIComponentFactory.cs`: Factory for creating UI components
- `Assets/Rosalina/AutoGenerated/`: Where Rosalina stores generated binding scripts

## How to Create a New UI Component

1. Create a UXML file for your component in `Assets/UI/Components/`
2. Add UI elements with meaningful names using the naming convention (e.g., `login-button`)
3. Create a USS stylesheet for your component (optional but recommended)
4. Create a partial C# class with the same name as your UXML file (without extension)
5. Add your UI component logic in the partial class
6. Right-click on your UXML file, select `Rosalina > Properties...`
7. Enable Rosalina code generation for your UXML file
8. Choose the appropriate Generator Type:
   - `Document`: For UIDocument-based components
   - `Component`: For custom components
   - `Editor`: For EditorWindow-based components

## Naming Conventions

Rosalina will convert dash-separated names to PascalCase in generated code:

- UXML: `<ui:Button name="login-button" />`
- Generated C#: `public Button LoginButton { get; private set; }`

## Working with Generated Code

The generated code will be placed in `Assets/Rosalina/AutoGenerated/` with a `.g.cs` extension. This file contains:

- Properties for all named elements in your UXML
- An `InitializeDocument()` method that finds elements by name
- The generated code should **never** be manually edited, as it's overwritten whenever the UXML changes

## Example Usage in MonoBehaviour

```csharp
public partial class LoginFormController : MonoBehaviour
{
    [SerializeField]
    private UIDocument _document;
    
    private void OnEnable()
    {
        // Call the method from the generated code
        InitializeDocument();
        
        // Now you can work with the UI elements
        loginButton.clicked += OnLoginButtonClicked;
    }
    
    private void OnLoginButtonClicked()
    {
        // Your login logic here
    }
}
```

## Tips for Working with Rosalina

1. Always use the `partial` keyword for your component classes
2. Make sure to call `InitializeDocument()` before accessing UI elements
3. Keep your UXML element names consistent and meaningful
4. Use the dash-separated naming convention for element names in UXML
5. Add event handlers after calling `InitializeDocument()`
6. Remove event handlers in `OnDisable()` to prevent memory leaks

## Troubleshooting

If Rosalina is not generating code:
1. Check if Rosalina is enabled in Project Settings
2. Verify that your UXML file is enabled for code generation
3. Make sure your C# class is partial and has the correct name
4. Check the Console for any Rosalina errors 